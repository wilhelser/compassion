<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Project
  
    &mdash; Documentation by YARD 0.8.7.3
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">Project</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Project
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">Project</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2">FriendlyId</dd>
      
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1">AutoHtml, <span class='object_link'><a href="ImageMethods.html" title="ImageMethods (module)">ImageMethods</a></span>, Koala, <span class='object_link'><a href="ProjectMethods.html" title="ProjectMethods (module)">ProjectMethods</a></span></dd>
      
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/models/project.rb</dd>
  
</dl>
<div class="clear"></div>








  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#text_search-class_method" title="text_search (class method)">+ (Object) <strong>text_search</strong>(query) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#address-instance_method" title="#address (instance method)">- (String) <strong>address</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Builds full address from project address fields.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#backer_count-instance_method" title="#backer_count (instance method)">- (Integer) <strong>backer_count</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Number of backers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_accept_donations-instance_method" title="#can_accept_donations (instance method)">- (Boolean) <strong>can_accept_donations</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Whether or not a project can accept donations if not, Donate button will
not appear on project page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compassion_access_token-instance_method" title="#compassion_access_token (instance method)">- (Object) <strong>compassion_access_token</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access token to allow app to publish on Compassion&#39;s FB page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compassion_fb_page_id-instance_method" title="#compassion_fb_page_id (instance method)">- (Integer) <strong>compassion_fb_page_id</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Page ID of Compassion&#39;s FB page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compassion_page_access_token-instance_method" title="#compassion_page_access_token (instance method)">- (Object) <strong>compassion_page_access_token</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access token to allow app to publish updates to Compassion&#39;s FB page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#complete%3F-instance_method" title="#complete? (instance method)">- (Boolean) <strong>complete?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine if a project has been ended and marked complete.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#construction_project%3F-instance_method" title="#construction_project? (instance method)">- (Boolean) <strong>construction_project?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determines whether Action is a construction project or not.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_contractor-instance_method" title="#has_contractor (instance method)">- (Boolean) <strong>has_contractor</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine whether project has an assigned contractor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_deadline%3F-instance_method" title="#has_deadline? (instance method)">- (Boolean) <strong>has_deadline?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determin if project has a deadline set.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_estimate%3F-instance_method" title="#has_estimate? (instance method)">- (Boolean) <strong>has_estimate?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine whether project has an estimate(s).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_excess_funds-instance_method" title="#has_excess_funds (instance method)">- (Boolean) <strong>has_excess_funds</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine if project contributions exceed goal amount.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_galleries%3F-instance_method" title="#has_galleries? (instance method)">- (Boolean) <strong>has_galleries?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determines if a project has any galleries.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_video%3F-instance_method" title="#has_video? (instance method)">- (Boolean) <strong>has_video?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine whether project has an associated YouTube video.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#image_url-instance_method" title="#image_url (instance method)">- (String) <strong>image_url</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Builds a full URL for a project&#39;s featured image fron the project&#39;s
key Used for small thumbnails.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#long_link-instance_method" title="#long_link (instance method)">- (String) <strong>long_link</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates full link to project.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nearby_contractors-instance_method" title="#nearby_contractors (instance method)">- (Hash) <strong>nearby_contractors</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Selects approved contractors within 200 miles of Action.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#needs_contractor-instance_method" title="#needs_contractor (instance method)">- (Boolean) <strong>needs_contractor</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determine whether project needs a contractor ( construction project ).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#needs_more_vendors-instance_method" title="#needs_more_vendors (instance method)">- (Boolean) <strong>needs_more_vendors</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determines whether Action needs additional vendors to cover excess funds.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#needs_vendors-instance_method" title="#needs_vendors (instance method)">- (Boolean) <strong>needs_vendors</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determines if project needs vendors ( not construction project ).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify_empty_contractors-instance_method" title="#notify_empty_contractors (instance method)">- (Object) <strong>notify_empty_contractors</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends Compassion an email when there are no approved contractors available
for project.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#percent_funded-instance_method" title="#percent_funded (instance method)">- (Float) <strong>percent_funded</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Percentage of project&#39;s goal_amount that is funded.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#post_to_compassion-instance_method" title="#post_to_compassion (instance method)">- (Object) <strong>post_to_compassion</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Posts project details to Compassion&#39;s FB page after project creation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#public_contributions-instance_method" title="#public_contributions (instance method)">- (Hash) <strong>public_contributions</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Project&#39;s public contributions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#qrcode-instance_method" title="#qrcode (instance method)">- (String) <strong>qrcode</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates a qrcode for display on the project print flyer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#recent_contributions-instance_method" title="#recent_contributions (instance method)">- (Hash) <strong>recent_contributions</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Recent contributions for display in project show sidebar.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_new_project_email-instance_method" title="#send_new_project_email (instance method)">- (Object) <strong>send_new_project_email</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends welcome email to user after creation of project.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_key-instance_method" title="#set_key (instance method)">- (String) <strong>set_key</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get&#39;s the actual image URL for a featured image uploaded through Ink
Filepicker and set&#39;s it as the project&#39;s key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_video_key-instance_method" title="#set_video_key (instance method)">- (String) <strong>set_video_key</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Pulls thumbnail image from YouTube to display as image on small project
view and sets the returned URL as project key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#site_root-instance_method" title="#site_root (instance method)">- (String) <strong>site_root</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set&#39;s a variable for use in full links This should probably be
extracted into the application controller for global availability.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stripped_content-instance_method" title="#stripped_content (instance method)">- (String) <strong>stripped_content</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Strips HTML from page_message for truncation and display on small project
view.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (String) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parameter for displaying project in dropdowns in admin panel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_contributions-instance_method" title="#total_contributions (instance method)">- (Decimal) <strong>total_contributions</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Project total contributions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_backer_count-instance_method" title="#update_backer_count (instance method)">- (Object) <strong>update_backer_count</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updates backer count after a contribution is made probable should add a
counter cache for this.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_goal_amount-instance_method" title="#update_goal_amount (instance method)">- (Object) <strong>update_goal_amount</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updates project goal_amount when vendors are added/removed.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ImageMethods.html" title="ImageMethods (module)">ImageMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ImageMethods.html#filepicker_api_key-instance_method" title="ImageMethods#filepicker_api_key (method)">#filepicker_api_key</a></span>, <span class='object_link'><a href="ImageMethods.html#get_s3_url-instance_method" title="ImageMethods#get_s3_url (method)">#get_s3_url</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ProjectMethods.html" title="ProjectMethods (module)">ProjectMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ProjectMethods.html#campaign_extended%3F-instance_method" title="ProjectMethods#campaign_extended? (method)">#campaign_extended?</a></span>, <span class='object_link'><a href="ProjectMethods.html#check_funded_status-instance_method" title="ProjectMethods#check_funded_status (method)">#check_funded_status</a></span>, <span class='object_link'><a href="ProjectMethods.html#clean_page_message_content-instance_method" title="ProjectMethods#clean_page_message_content (method)">#clean_page_message_content</a></span>, <span class='object_link'><a href="ProjectMethods.html#email_inactive_projects-instance_method" title="ProjectMethods#email_inactive_projects (method)">#email_inactive_projects</a></span>, <span class='object_link'><a href="ProjectMethods.html#end_campaign-instance_method" title="ProjectMethods#end_campaign (method)">#end_campaign</a></span>, <span class='object_link'><a href="ProjectMethods.html#extend_campaign-instance_method" title="ProjectMethods#extend_campaign (method)">#extend_campaign</a></span>, <span class='object_link'><a href="ProjectMethods.html#funded_decision_made%3F-instance_method" title="ProjectMethods#funded_decision_made? (method)">#funded_decision_made?</a></span>, <span class='object_link'><a href="ProjectMethods.html#projects_not_funded-instance_method" title="ProjectMethods#projects_not_funded (method)">#projects_not_funded</a></span>, <span class='object_link'><a href="ProjectMethods.html#send_funded_email-instance_method" title="ProjectMethods#send_funded_email (method)">#send_funded_email</a></span>, <span class='object_link'><a href="ProjectMethods.html#set_to_funded-instance_method" title="ProjectMethods#set_to_funded (method)">#set_to_funded</a></span></p>

  
  
  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="text_search-class_method">
  
    + (<tt>Object</tt>) <strong>text_search</strong>(query) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 133</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_text_search'>text_search</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_scoped'>scoped</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="address-instance_method">
  
    - (<tt>String</tt>) <strong>address</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Builds full address from project address fields</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>full project address for display on site</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_address'>address</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_street_address'>street_address</span><span class='comma'>,</span> <span class='id identifier rubyid_city'>city</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_zip_code'>zip_code</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="backer_count-instance_method">
  
    - (<tt>Integer</tt>) <strong>backer_count</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Number of backers. Based off contributions should probably implement a
counter cache</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>total number of project&#39;s contributions</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 309</span>

<span class='kw'>def</span> <span class='id identifier rubyid_backer_count'>backer_count</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_contributions'>contributions</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_accept_donations-instance_method">
  
    - (<tt>Boolean</tt>) <strong>can_accept_donations</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Whether or not a project can accept donations if not, Donate button will
not appear on project page</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if project has a goal_amount set</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 300</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_accept_donations'>can_accept_donations</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goal_amount'>goal_amount</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compassion_access_token-instance_method">
  
    - (<tt>Object</tt>) <strong>compassion_access_token</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access token to allow app to publish on Compassion&#39;s FB page</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338
339</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 336</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compassion_access_token'>compassion_access_token</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>231408540317089|m8oArqgfDqwmu1yS38QjXDUtVvQ</span><span class='tstring_end'>&quot;</span></span>
  <span class='comment'># &quot;289217204546185|SiM5nY_waJtkr9JjpeLBRluESNc&quot; DEVELOPMENT
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compassion_fb_page_id-instance_method">
  
    - (<tt>Integer</tt>) <strong>compassion_fb_page_id</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Page ID of Compassion&#39;s FB page</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>page id for Compassion&#39;s FB page</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 352</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compassion_fb_page_id'>compassion_fb_page_id</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>583630311678418</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compassion_page_access_token-instance_method">
  
    - (<tt>Object</tt>) <strong>compassion_page_access_token</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access token to allow app to publish updates to Compassion&#39;s FB page</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 344</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compassion_page_access_token'>compassion_page_access_token</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CAADSdvZCX9aEBAN1dkD6B78ZAG1iA8UTKuspwdU0WnH1cNGOahUvxxo8ExZALWcltF4MuwD3L8k43TXDkzrXv8i5M3ZCZB3bKN7BO6bQg6krjOd2WOUrOPBN173XuulUkF2lDanjpVLCv3uKs8hBvhvmGC70gTZCAjtq6ayZBCZCleLhmJS4iZCC1</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="complete?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>complete?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine if a project has been ended and marked complete</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if project has been ended</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_complete?'>complete?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_campaign_ended'>campaign_ended</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="construction_project?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>construction_project?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determines whether Action is a construction project or not</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if Action is in the Construction category ( 8 )</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 84</span>

<span class='kw'>def</span> <span class='id identifier rubyid_construction_project?'>construction_project?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_category_ids'>category_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_contractor-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_contractor</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine whether project has an assigned contractor</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if project has an assigned contractor</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 255</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_contractor'>has_contractor</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_contractors'>contractors</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='kw'>false</span>
  <span class='kw'>else</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_deadline?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_deadline?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determin if project has a deadline set</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if project has a deadline set</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_deadline?'>has_deadline?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_project_deadline'>project_deadline</span> <span class='op'>!=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_estimate?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_estimate?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine whether project has an estimate(s)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if project has any associated estimates</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 211</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_estimate?'>has_estimate?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_estimates'>estimates</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_excess_funds-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_excess_funds</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine if project contributions exceed goal amount</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if total contributions are greater than goal amount</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


370
371
372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 370</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_excess_funds'>has_excess_funds</span>
  <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_total_contributions'>total_contributions</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_goal_amount'>goal_amount</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_galleries?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_galleries?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determines if a project has any galleries</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>true if project has galleries
<dd></dd></dl>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 145</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_galleries?'>has_galleries?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_galleries'>galleries</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_video?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_video?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine whether project has an associated YouTube video</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if project has value in featured_video column</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 219</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_video?'>has_video?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_featured_video'>featured_video</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="image_url-instance_method">
  
    - (<tt>String</tt>) <strong>image_url</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Builds a full URL for a project&#39;s featured image fron the project&#39;s
key Used for small thumbnails</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>full featured_image URL</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_image_url'>image_url</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://s3.amazonaws.com/c4humanity/</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="long_link-instance_method">
  
    - (<tt>String</tt>) <strong>long_link</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates full link to project</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>full URL to project</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_long_link'>long_link</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_site_root'>site_root</span><span class='embexpr_end'>}</span><span class='tstring_content'>projects/</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_slug'>slug</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nearby_contractors-instance_method">
  
    - (<tt>Hash</tt>) <strong>nearby_contractors</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Selects approved contractors within 200 miles of Action</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>contractors within 200 miles
<dd></dd></dl>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nearby_contractors'>nearby_contractors</span>
  <span class='const'>Contractor</span><span class='period'>.</span><span class='id identifier rubyid_approved'>approved</span><span class='period'>.</span><span class='id identifier rubyid_near'>near</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='int'>200</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="needs_contractor-instance_method">
  
    - (<tt>Boolean</tt>) <strong>needs_contractor</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determine whether project needs a contractor ( construction project )</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if project is contruction project</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 239</span>

<span class='kw'>def</span> <span class='id identifier rubyid_needs_contractor'>needs_contractor</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_category_ids'>category_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="needs_more_vendors-instance_method">
  
    - (<tt>Boolean</tt>) <strong>needs_more_vendors</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determines whether Action needs additional vendors to cover excess funds</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if Action has excess funds and isn&#39;t complete</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98
99
100</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_needs_more_vendors'>needs_more_vendors</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_construction_project?'>construction_project?</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_complete?'>complete?</span>
    <span class='kw'>false</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_has_excess_funds'>has_excess_funds</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span><span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="needs_vendors-instance_method">
  
    - (<tt>Boolean</tt>) <strong>needs_vendors</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determines if project needs vendors ( not construction project )</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true unless project is construction project</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 247</span>

<span class='kw'>def</span> <span class='id identifier rubyid_needs_vendors'>needs_vendors</span>
  <span class='kw'>true</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_category_ids'>category_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_empty_contractors-instance_method">
  
    - (<tt>Object</tt>) <strong>notify_empty_contractors</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sends Compassion an email when there are no approved contractors available
for project</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


386
387
388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 386</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_empty_contractors'>notify_empty_contractors</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_nearby_contractors'>nearby_contractors</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='const'>ProjectMailer</span><span class='period'>.</span><span class='id identifier rubyid_no_contractor_notification'>no_contractor_notification</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_deliver'>deliver</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="percent_funded-instance_method">
  
    - (<tt>Float</tt>) <strong>percent_funded</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Percentage of project&#39;s goal_amount that is funded</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>percentage of goal amount funded</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327
328
329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 325</span>

<span class='kw'>def</span> <span class='id identifier rubyid_percent_funded'>percent_funded</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goal_amount'>goal_amount</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_total_contributions'>total_contributions</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goal_amount'>goal_amount</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='float'>100.0</span>
  <span class='kw'>else</span>
    <span class='float'>0.00</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="post_to_compassion-instance_method">
  
    - (<tt>Object</tt>) <strong>post_to_compassion</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Posts project details to Compassion&#39;s FB page after project creation</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


359
360
361
362
363
364</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 359</span>

<span class='kw'>def</span> <span class='id identifier rubyid_post_to_compassion'>post_to_compassion</span>
  <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_private?'>private?</span>
    <span class='ivar'>@graph</span> <span class='op'>=</span> <span class='const'>Koala</span><span class='op'>::</span><span class='const'>Facebook</span><span class='op'>::</span><span class='const'>API</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_compassion_page_access_token'>compassion_page_access_token</span><span class='rparen'>)</span>
    <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_put_wall_post'>put_wall_post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>New Action posted!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_page_title'>page_title</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:description</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Description here</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:link</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://compassionforhumanity.org/projects/</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_slug'>slug</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="public_contributions-instance_method">
  
    - (<tt>Hash</tt>) <strong>public_contributions</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Project&#39;s public contributions</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>all public contributions to project</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_public_contributions'>public_contributions</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_contributions'>contributions</span><span class='period'>.</span><span class='id identifier rubyid_public'>public</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="qrcode-instance_method">
  
    - (<tt>String</tt>) <strong>qrcode</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates a qrcode for display on the project print flyer</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>generated URL for project&#39;s qrcode</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


267
268
269</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 267</span>

<span class='kw'>def</span> <span class='id identifier rubyid_qrcode'>qrcode</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_long_link'>long_link</span><span class='embexpr_end'>}</span><span class='tstring_content'>.png</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="recent_contributions-instance_method">
  
    - (<tt>Hash</tt>) <strong>recent_contributions</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Recent contributions for display in project show sidebar</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>last 10 contributions</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 317</span>

<span class='kw'>def</span> <span class='id identifier rubyid_recent_contributions'>recent_contributions</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_contributions'>contributions</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_new_project_email-instance_method">
  
    - (<tt>Object</tt>) <strong>send_new_project_email</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sends welcome email to user after creation of project</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 152</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_new_project_email'>send_new_project_email</span>
  <span class='const'>ProjectMailer</span><span class='period'>.</span><span class='id identifier rubyid_new_project_user_email'>new_project_user_email</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_deliver'>deliver</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_key-instance_method">
  
    - (<tt>String</tt>) <strong>set_key</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get&#39;s the actual image URL for a featured image uploaded through Ink
Filepicker and set&#39;s it as the project&#39;s key</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>set&#39;s the project&#39;s key</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111
112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_key'>set_key</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_featured_image'>featured_image</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='ivar'>@image</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_featured_image'>featured_image</span>
    <span class='ivar'>@key</span> <span class='op'>=</span> <span class='id identifier rubyid_get_s3_url'>get_s3_url</span><span class='lparen'>(</span><span class='ivar'>@image</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='ivar'>@key</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_video_key-instance_method">
  
    - (<tt>String</tt>) <strong>set_video_key</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Pulls thumbnail image from YouTube to display as image on small project
view and sets the returned URL as project key</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>URL to YouTube thumbnail image</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72
73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 69</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_video_key'>set_video_key</span>
  <span class='id identifier rubyid_video_link'>video_link</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_featured_video'>featured_video</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_video_link'>video_link</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>youtu.be</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_video_id'>video_id</span> <span class='op'>=</span> <span class='id identifier rubyid_video_link'>video_link</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://youtu.be/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_video_link'>video_link</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>youtube.com</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_video_id'>video_id</span> <span class='op'>=</span> <span class='id identifier rubyid_video_link'>video_link</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://youtube.com/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_video_key'>video_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://img.youtube.com/vi/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_video_id'>video_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/0.jpg</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_video_key'>video_key</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="site_root-instance_method">
  
    - (<tt>String</tt>) <strong>site_root</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set&#39;s a variable for use in full links This should probably be
extracted into the application controller for global availability</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Base site URL</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_site_root'>site_root</span>
  <span class='kw'>if</span> <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>development</span><span class='tstring_end'>&quot;</span></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://mnp.dev/</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://compassionforhumanity.org/</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stripped_content-instance_method">
  
    - (<tt>String</tt>) <strong>stripped_content</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Strips HTML from page_message for truncation and display on small project
view</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>sanitized page_message</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 58</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stripped_content'>stripped_content</span>
  <span class='ivar'>@body</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_page_message'>page_message</span>
  <span class='kw'>return</span> <span class='const'>ActionView</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_full_sanitizer'>full_sanitizer</span><span class='period'>.</span><span class='id identifier rubyid_sanitize'>sanitize</span><span class='lparen'>(</span><span class='ivar'>@body</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    - (<tt>String</tt>) <strong>to_s</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Parameter for displaying project in dropdowns in admin panel</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>project&#39;s page title</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_page_title'>page_title</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="total_contributions-instance_method">
  
    - (<tt>Decimal</tt>) <strong>total_contributions</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Project total contributions</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Decimal</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>sum total of project&#39;s contributions</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_contributions'>total_contributions</span>
  <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_contributions'>contributions</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_contributions'>contributions</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='symbol'>:amount</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='float'>0.00</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_backer_count-instance_method">
  
    - (<tt>Object</tt>) <strong>update_backer_count</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Updates backer count after a contribution is made probable should add a
counter cache for this</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 275</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_backer_count'>update_backer_count</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attribute'>update_attribute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>backer_count</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_contributions'>contributions</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_goal_amount-instance_method">
  
    - (<tt>Object</tt>) <strong>update_goal_amount</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Updates project goal_amount when vendors are added/removed</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


377
378
379
380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/project.rb', line 377</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_goal_amount'>update_goal_amount</span>
  <span class='ivar'>@vendor_total</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_vendors'>vendors</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='symbol'>:amount</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attribute'>update_attribute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>goal_amount</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='ivar'>@vendor_total</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Jan 22 17:08:03 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-2.0.0).
</div>

  </body>
</html>